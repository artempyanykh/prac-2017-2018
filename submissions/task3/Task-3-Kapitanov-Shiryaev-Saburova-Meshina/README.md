# Задание 3

## Описание программы
Программа принимает на вход названия файлов, которые необходимо обработать: **sell.csv, supply.csv, inventory.csv**.
Эти три файла описывают один из магазинов торговой сети, каждый магазин находится в каком-то конкретном штате.
В программе учитывается, что первые две буквы названия файла являются почтовым кодом штата США.
Программа перестает считывать названия файла, если пользователь введет *"end"*.

Для каждого магазина мы получаем три файла: **daily.csv, steal.csv, sold_stolen.csv**.

* *daily.csv* содержит информацию о состоянии склада на каждый день,

* *steal.csv* содержит информацию о украденом товаре за каждый месяц,

* *sold_stolen.csv* содержит информацию о украденном и проданном товаре за каждый год.

У нас есть информация про
1) Закупки (поставки яблок и карандашей два раза в месяц);

### supply.csv

Файл состоит из записей вида 

date       | apple | pen
---        | ---   | ---
2006-01-01 | 2999  | 332
2006-01-15 | 3084  | 337
2006-02-01 | 2971  | 341

* apple/pen - число яблок/карандашей, поступивших на склад. Они поступают туда 1-го и 15-го числа каждого месяца.

2) Продажи (лог транзакций, по записи на каждую проданную позицию);

### sell.csv

Файл состоит из записей вида 

date       | sku_num
---        | --- 
2006-01-01 | MS-s4-ap-6d174403-2b63-4eac-b4e7-ee52717945fd
2006-01-01 | MS-s4-ap-d537536e-088c-44a9-bde0-66ddf3f9eaf2
2006-01-01 | MS-s4-pe-6188ebf9-bfbc-4b6e-81fa-ccc7e2bd71c3

* date - столбец, обозначающий дату
* sku_num - стобец, содержащий идентификационный номер

* MS - название штата
* s4 - магазин
* ap/pe - наименование товара - яблоко/ручка
* 6188ebf9-bfbc-4b6e-81fa-ccc7e2bd71c3 - идентификационный код

3) Инвентарь (месячные данные общего количества яблок и ручек на складе);

### inventory.csv

Файл состоит из записей вида 

date       | apple | pen
---        | ---   | ---
2006-01-31 | 3140  | 339
2006-02-28 | 6450  | 759
2006-03-31 | 9517  | 1142

* date - столбец, обозначающий дату
* apple - стобец, обозначающий количество яблок, хранящихся на складе на конец месяца
* pen - стобец, обозначающий количество ручек, хранящихся на складе на конец месяца

Учет товаров происходил 1 раз в месяц.

Нужно:
1) Состояние склада на каждый день;
2) Месячные данные о количестве сворованного товара;
3) Агрегированные данные об объемах продаж и количестве сворованной продукции по штату и году;
  
После того, как были обработаны данные о всех магазинах, обрабатываются файлы **sold_stolen.csv**. 
Эти файлы объединяются, сортируются по годам и штатам, если несколько магазинов находятся в одном штате, 
то данные о продаже и сворованном товаре суммируются.
В результате получаем файл **all_sold_stolen.csv**, в котором данные объеденены по годам и штатам

## Теория

Названия входных файлов можно условно поделить на 2 части: префикс, который имеет следующий вид: "Штат-Название магазина" и суффикс - "supply.csv", "sell.csv", "invenory.csv". Мы отдельно работаем с каждым суффиксом, с помощью которого получаем доступ к 3 файлам: закупки, продажи и инвентарь. Подсчитаем число яблок и ручек, проданных за каждый день. Для этого в файле `sell.csv` просто подсчитываем число строк, содержащих "pe"/"ap" для каждого дня. 

### Состояние склада на каждый день

Из условия задачи поступления на склад происходят 2 раза в месяц. Значит 1 и 15 числа будут положительные значения в таблице, в остальные дни - отрицательные. Далее просуммируем за каждый месяц - получим состояние склада на каждый день.

### Месячные данные о количестве сворованного товара

Чтобы получить значения сворованного товара за месяц, достаточно вычесть из вычисленного реального состояния склада в конце месяца количество товара, указанное в инвентаре.

### Агрегированные данные об объемах продаж и количестве сворованной продукции по штату и году

Добавляем индексы штата и года в список statistics. Суммируем по ним все продажи и количество сворованного товара и конкатенируем в единый DataFrame.

## Используемые библиотеки
**pandas (Для работы с временными рядами), csv(Для чтения и записи файла в формате CSV)**

## Запуск программы
Зайти в директорию с проектом 
Ввести в терминале **"jupyter notebook"**

## Участники 
312 группа:
1) Капитанов Филипп
2) Ширяев Павел
3) Сабурова Анна
4) Мешина Злата
* Все этапы работы были выполнены совместно.
