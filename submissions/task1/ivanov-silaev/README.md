# *Задание 1*

## *Краткое описание задания*

1. _(50 баллов)_ Необходимо написать функция ```nash_equilibrium(a)```, которая принимает матрицу выигрыша и возвращает значение игры и оптимальные стратегии первого и второго игроков.

2. _(50 баллов)_ Проиллюстрировать работу вашего кода путем решения нескольких игр и визуализации спектров оптимальных стратегий игроков в Jupyter. В частности, нужно привести игры, в которых:

	1. спектр оптимальной стратегии состоит из одной точки (т.е. существует равновесие Нэша в чистых стратегиях),
	2. спектр оптимальной стратегии неполон (т.е. некоторые чистые стратегии не используются), 
	3. спектр оптимальной стратегии полон.

3. _(10 баллов)_ Оформить решение в виде пакета.

4. _(20 баллов)_ Написать unit-тесты для функции ```nash_equilibrium```.

## *Подход к решению*
Описание:
		В данной программе конечная матричная антоганистическая игра приводилась к двум взаимодвойственным задачам линейного программирования. Антоганистическая игра задается платежной матрицей А, имеющей размерность m*n. Нам необходимо найти решение игры, то есть определить оптимальные смешанные стратегии первого и второго игроков Р*=(р1*,...,рm*) и Q*=(q1*,...,qn*), где компаненты pi qj характеризуют вероятности применения стратегии i и j. Найдем сначала оптимальную стратегию первого игрока Р*, эта стратегия должна должна обеспечить выигрыш не меньше чем V. V достигается при оптимальном поведении второго игрока, при стратегии Q*. V пока неизвестна, предполагаем ее равной некоторому положительному числу V>0, достаточно, чтобы все элементы матрицы A были неотрицательными. Этого всегда можно добиться с помощью аффинных преобразований: прибавляя ко всем элементам матрицы A одну и ту же достаточно большую положительную константу М(реализованно так: находим наименьший элемент матрицы, если он отрицателен, то вычитаем его из всех остальных элементов); при этом цена игры увеличится на М, а решение не изменится. Положим V > 0. Предположим, что первый игрок применяет свою оптимальную стратегию P*, а второй игрок свою чистую стратегию j, тогда средний выигрыш (математическое ожидание) первого игрока будет равен:
	aj=Sum(aij*pi*)(i=1 до m)
Оптимальная стратегия первого игрока обладает тем свойством, что при любом поведении второго игрока обеспечивает выигрыш первому игроку, не меньший, чем цена игры V; значит, любое из чисел aj не может быть меньше V (≥ V). Следовательно, при оптимальной стратегии, должна выполняться следующая система неравенств:
(*)
	a11p1*+...+am1pm*>=V
	...
	a1np1*+...+amnpm*>=V

Разделим неравенства (*) на положительную величину V и введём обозначения:
y1=p1*/V; ... ; ym=pm*/V (**)
y1 ≥ 0, y2 ≥ 0, .., ym ≥ 0, (***)
Тогда условия (*) запишутся в виде:
(****)
	a11y1+...+am1ym>=1
	...
	a1ny1+...+amnym>=1,

где y1,y2,...ym - неотрицательные переменные. В силу (**) и того, что p1*+...+pm*=1 переменные y1, y2 , ..., ym удовлетворяют условию, которое обозначим через F:
(*****)
	F=y1+...+ym=1/V
Поскольку первый игрок свой гарантированный выигрыш V старается сделать максимально возможным (V-> max), очевидно, при этом 1/V->min - принимает минимальное значение. Таким образом, задача решения антагонистической игры для первого игрока свелась к следующей математической задаче:
определить неотрицательные значения переменных , чтобы они удовлетворяли системе функциональных линейных ограничений в виде неравенств (****), системе общих ограничений (***) и минимизировали целевую функцию F:
	F=y1+...+ym->min  
Таким образом, решая данную задачу, мы находим оптимальную стратегию P* для первого игрока.
Аналогично делается все для второго игрока, разница только в том, что он стремиться минимизировать выигрыш V (потому что он является его проигрышом), следовательно V->min, остальное все аналогично.

Решать данную задачу будем симплекс-методом, найдя решение прямой задачи линейного программирования, мы можем найти оптимальную стратегию второго игрока, то есть решение обратной задачи.

1. Написание функции ```nash_equilibrium(a)```.

	1. Свести исходную задачу (имея исходную матрицу игры) к двойственной задаче линейного программирования.
	2. Решить двойственную задачу линейного программирования симплекс-методом.
	3. Из решения двойственной задачи линейного программирования найти цену игры и оптимальные стратегии игроков.
2. Иллюстрация работы кода.
	1. Используя библиотеку ```matplotlib.pyplot``` и ```fractions``` реализовать красивый вывод решения исходной задачи.
	2. Составить набор матриц, описывающих антагонистические матричные игры, в котором присутствуют матричные игры различных типов. 

3. Оформление решения в виде пакета.

	1. Оформить решение в виде пакета следуя [руководству](https://python-packaging.readthedocs.io/en/latest/minimal.html).

## *Иструкция по запуску*
Cell -> Run All - для Jupiter

## *Описание файлов*
В проекте присутствуют следующие файлы (пути указываются относительно папки текущего Readme файла):

1. _README.md_ - руководство по использованию данного проекта.
1. _package/MANIFEST.in_ - файлы, которые необходимо включить в пакет.
1. _package/README.txt_ - описание пакета.
1. _package/setup.py_ - настроки пакета.
1. _package/nash_equilibrium/\_\_init\_\_.py_ - файл-маяк, который подсказывает, что это директория пакета.
1. _package/nash_equilibrium/source.ipynb_ - исходный код проекта.

## *Зависимости*

### *Библиотеки*
1. *Numpy* - работа с массивами.
1. *Scipy* - решение задачи линейного программирования симплекс-методом была взята функция linprog.
1. *Fractions* - вывод чисел в виде рациональных дробей.
4. *pylab* - для визуализации
5. *matplotlib.lines* - столбчатые диаграммы

### *ПО*
1. Python не ниже 3.6
2. Jupyter Notebook


### Авторы
1. Иванов Александр Валерьевич, 311 группа:
	1. Реализация функции ```nash_equilibrium(a)```.
	2. Оформление решения в виде пакета.

2. Силаев Иван Игоревич, 311 группа:
	1. Реализация красивого вывода результатов решения исходной задачи.
	2. Создание набора различных матриц, описывающих антагонистические матричные игры.
## **Cпасибо,что прочли README
